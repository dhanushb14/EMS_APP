{% extends "employee_information/base.html" %} {% block pageContent %}
<style>
  .approved-row {
    border-left: 5px solid #8effa8;
  }
  .rejected-row {
    border-left: 5px solid #ff8491;
  }
  .table-responsive {
    overflow-y: auto;
    max-height: 138.5px; /* Adjust the max-height as per your requirement */
  }
</style>
<body class="body_bg">
  <div class="container mg-t">
    <div class="row">
      <div class="col-12">
        <h2 class="fw-bold mb-4">Dashboard</h2>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-5">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-2 text-center my-auto">
              <i
                class="fa-solid fa-user my-auto"
                style="color: rgb(175, 109, 251); font-size: 60px"
              ></i>
            </div>
            <div class="col">
              <p class="h2">{{ request.user.employee_name }} ( {{ request.user.employee_id }} )</p>
              <p>
                <i
                  class="fa-solid fa-briefcase me-2"
                  style="color: rgb(175, 109, 251);"
                ></i>

                {% if request.user.role == "superadmin" %}Super Admin
                {% elif request.user.role == "scrummaster" %}Srum Master
                {% elif request.user.role == "manager" %}Manager
                {% else %}Employee{% endif %}
              </p>
              <p>
                <i class="fa-solid fa-envelope me-2" style="color: rgb(175, 109, 251);"></i
                >{{ request.user.email_id}}
              </p>
              <p>
                <i class="fa-solid fa-building me-2 mb-4" style="color: rgb(175, 109, 251);"></i
                >Intello Global Services
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <div class="card-body">
          <p class="h2 text-center">
            <i class="fa-solid fa-bell me-4" style="color: rgb(175, 109, 251);"></i>Notice
            Board
          </p>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <th>Date</th>
                <th>Type</th>
                <th>Status</th>
                <th>Comments</th>
              </thead>
              <tbody>
                {% if data_result %}
                  {% for position in data_result %}
                    {% if position.status == "Rejected" %}
                      <tr class="rejected-row">
                        <td>{{position.start_date}}</td>
                        {% if position.leave_type %}
                          <td>LeaveRequest</td>
                        {% else %}
                          <td>TimeSheet</td>
                        {% endif %}
                        <td>Rejected</td>
                        <td>{{position.comments}}</td>
                      </tr>
                    {% endif %}
                    {% if position.status == "uncheck" %}
                      <tr class="rejected-row">
                        <td>{{position.start_date}}</td>
                        {% if position.leave_type %}
                          <td>LeaveRequest</td>
                        {% else %}
                          <td>TimeSheet</td>
                        {% endif %}
                        <td>Uncheck</td>
                        <td>{{position.comments}}</td>
                      </tr>
                    {% endif %}
                    {% if position.status == "Approved" %}
                      <tr class="approved-row">
                        <td>{{position.start_date}}</td>
                        {% if position.leave_type %}
                          <td>LeaveRequest</td>
                        {% else %}
                          <td>TimeSheet</td>
                        {% endif %}
                        <td>Approved</td>
                        <td>{{position.comments}}</td>
                      </tr>
                    {% endif %}
                  {% endfor %}
                {% else %}
                  <tr class="rejected-row">
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                {% endif %}
                  </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card mt-5">
    <div class="card-body">
      <div class="row">
        <div class="col-2 text-center my-auto">
          <i
            class="fa-solid fa-sitemap my-auto"
            style="color: rgb(175, 109, 251); font-size: 60px"
          ></i>
        </div>
        {% if request.user.role != "manager" %}
          {% if request.user.role != "superadmin" %}

              <div class="col ms-2">
                <p class="h2">Manager</p>
                <p class="h5">{{manager.employee_name}}</p>
                <p>
                  <i class="fa-solid fa-envelope me-2" style="color: rgb(175, 109, 251);"></i
                  >{{manager.email_id}}
                </p>
                <p>
                  <i class="fa-solid fa-phone me-2" style="color: rgb(175, 109, 251);"></i
                  >{{manager.phonenumber}}
                </p>
              </div>

          {% else %}

              <div class="col ms-2">
                <p class="h2">Manager</p>
                {% for name in allManagers %}
                  <p class="h6">{{ forloop.counter }}. {{name}}</p>
                  {% endfor %}
              </div>
          {% endif %}

        
              
        {% else %}
        
              <div class="col ms-2">
                <p class="h2">Admin</p>
                <p class="h5">{{admin.employee_name}}</p>
                <p>
                  <i class="fa-solid fa-envelope me-2" style="color: rgb(175, 109, 251);"></i
                  >{{admin.email_id}}
                </p>
                <p>
                  <i class="fa-solid fa-phone me-2" style="color: rgb(175, 109, 251);"></i
                  >{{admin.phonenumber}}
                </p>
              </div>
          
        {% endif %}
        {% if scrum_master %}
          <div class="col">
            <p class="h2">Scrum Master</p>
            <p class="h5">{{scrum_master.employee_name}}</p>
            <p>
              <i class="fa-solid fa-envelope me-2" style="color: rgb(175, 109, 251);"></i
              >{{scrum_master.email_id}}
            </p>
            <p>
              <i class="fa-solid fa-phone me-2" style="color: rgb(175, 109, 251);"></i
              >{{scrum_master.phonenumber}}
            </p>
          </div>
          <div class="col">
            <p class="h2">Team</p>
            <p class="h5 my-auto">{{scrum_team}}</p>
          </div>
        {% else %}
          {% if request.user.role == 'scrummaster' %}
            <div class="col">
              <p class="h2">Team Member</p>
              {% for i in team_member %}
                <p class="h6">{{forloop.counter}}. {{i}}</p>
              {% endfor %}
            </div>
            <div class="col">
              <p class="h2">Team</p>
              <p class="h5 my-auto">{{member_team_name}}</p>
            </div>
          {% else %}
          
            <div class="col">
              <p class="h2">Scrum Masters</p>
              {% if scrum_emp %}
                {% for emp in scrum_emp %}
                  <p class="h6">{{ forloop.counter }}. {{emp.scrum_master}}</p>
                {% endfor %}
              {% else %}
                <p class="h6">Nil</p>
              {% endif %}
            </div>
            <div class="col">
              <p class="h2">Team</p>
              {% if scrum_emp %}
                {% for team in scrum_emp %}
                  <p class="h6 my-auto">{{ forloop.counter }}. {{team.team_name}}</p>
                {% endfor %}
              {% else %}
                <p class="h6">Nil</p>
              {% endif %}
            </div>
          {% endif %}
        {% endif %}
          
        </div>
    </div>
  </div>
</div>
{% endblock pageContent %}
